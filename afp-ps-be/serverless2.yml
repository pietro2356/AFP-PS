service: serverless-2024-prova
frameworkVersion: "3"

provider:
  name: aws
  runtime: nodejs20.x
  region: us-east-1
  stage: dev
  iam:
    role: arn:aws:iam::590183771822:role/LabRole
  environment:
    DB_HOST: "db-prova.cvq2w8w6chwy.us-east-1.rds.amazonaws.com"
    DB_PORT: 3306
    DB_USER: "admin"
    DB_PASSWORD: "password12345"
    DB_NAME: "ps_afp"

    # admin/password12345
    # ENDPOINT: ps-afp.cvq2w8w6chwy.us-east-1.rds.amazonaws.com

functions:
  hello:
    handler: src/handler.hello
    events:
      - httpApi:
          path: /hello
          method: POST
          cors: true
  getAllPatient:
    handler: src/handler.getAllPatients
    events:
      - httpApi:
          path: /getAllPatients
          method: GET
          cors: true
  createPatient:
    handler: src/handler.createPatient
    events:
      - httpApi:
          path: /createPatient
          method: POST
          cors: true
  getPatientById:
    handler: src/handler.getPatientById
    events:
      - httpApi:
          path: /getPatientById
          method: GET
          cors: true
  getPatientByNameSurnameBirthDate:
    handler: src/handler.getPatientByNameSurnameBirthDate
    events:
      - httpApi:
          path: /patientNameSurnameBirthDate
          method: GET
          cors: true

configValidationMode: warn

plugins:
  - serverless-offline
  - serverless-plugin-typescript
